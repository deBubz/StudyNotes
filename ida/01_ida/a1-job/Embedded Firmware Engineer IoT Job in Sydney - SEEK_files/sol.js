!function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[s]={exports:{}};e[s][0].call(l.exports,(function(t){return o(e[s][1][t]||t)}),l,l.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.init=i.getVersion=i.getItem=i.setItem=void 0;var n=t("./version.js"),o="/a-b.html",r="ready",s="loading",a={error:"The solStorage was created to be used inside a web browser. You can render it on the server but use it ONLY on the client side."},u=(i.setItem=function(t,e){return d({key:t,value:e,method:"setItem"})},i.getItem=function(t){return d({key:t,method:"getItem"})},i.getVersion=function(){return"sol-storage/"+n.version},function(){return"undefined"!=typeof window}),c=function t(e){switch(window.solStorage=window.solStorage?window.solStorage:{},window.solStorage.state){case r:e(window.solStorage);break;case s:setTimeout((function(){return t(e)}),10);break;default:window.solStorage.state=s;var i=document.createElement("iframe");i.width=0,i.height=0,i.title="Sol storage host",i.style="display:none",i.src=f()+o,i.addEventListener("load",(function(){window.solStorage.state=r,e(window.solStorage)})),document.body.appendChild(i)}},l=i.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};!u()&&console.error(a),u()&&c(t)},d=function(t){var e=t.key,i=t.value,n=t.method;return new Promise((function(t,r){!u()&&r(a),u()&&l((function(){var s=function(e){e.error?r(e):(window.removeEventListener("message",s),t(e.data.response))}.bind(void 0);window.addEventListener("message",s),document.querySelector('iframe[src="'+(f()+o)+'"]').contentWindow.postMessage({key:e,value:i,method:n},f())}))}))},f=function(){try{return window.sol().context.apiHost}catch(t){return"https://web.sol-data.com"}}},{"./version.js":8}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Sol=void 0;var n=t("./utils.js"),o=t("./tracking.js"),r=t("./storage.js"),s=t("./transport.js"),a=t("./version.js");function u(){if((0,n.timeStamp)("Sol constructor"),!window.sol)throw'"sol" snippet must be included before the script tag';if(window.sol.loaded)throw'"sol" object is already loaded';"undefined"!=typeof window&&(window.solStorage=t("./cross-storage")),this.context={version:"sol-js/"+a.version,debug:(0,n.isDebugBuild)(),batch:!0,batchLingerMs:500,visitorId:"2d053774-74ee-4da1-874f-595db179c602",apiHost:"https://web.sol-data.com",apiPath:"/v1/events",userAgent:window.navigator.userAgent,referrerUrl:window.document.referrer,impressionDuration:1e3,impressionVisible:.5,transport:new s.Transport,_lastRequestMetrics:{_sessionId:(0,n.uuidV4)().substring(0,8),_seqNum:0,_cfRay:null,_failures:0,_requestDuration:null,_status:null}},this._buffer=[],this._failedBuffer=[],this._bufferFlushTimer=null,this.impressionListeners=Map?new Map:new n.TinyMap;var e=function(){window.clearTimeout(this._bufferFlushTimer),this._unloading=!0,this._buffer.length>0&&this._flushBuffer()}.bind(this);"onpagehide"in window?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1),window.sol.loaded=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this._attachToGlobal.bind(this),!1):this._attachToGlobal()}u.prototype._track=function(t){try{if((0,n.isUndefined)(t))return this;for(var e=arguments.length,i=Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];switch(t=t.toUpperCase()){case"INIT":this._init.apply(this,i);break;case"CONFIG":this._config.apply(this,i);break;case"SEARCH":this._search.apply(this,i);break;case"ACTIVITY":this._activity.apply(this,i);break;case"MONITOR:IMPRESSION":this._watchImpression.apply(this,i);break;case"MONITOR:IMPRESSION:OFF":this._watchImpressionOff.apply(this,i);break;case"RECOMMENDATIONS_DISPLAYED":this._recommendationsDisplayed.apply(this,i);break;case"DISPLAY":this._display.apply(this,i);break;default:this._error('Invalid trackType "'+t+'"')}}catch(t){this._error(t)}},u.prototype.getVisitorId=function(){return this._visitorIdProvider()};var c="sol_id_initialized",l="sol_id_pre_stored",d="sol_id_generated",f="sol_id_from_context",h="sol_id_old_value",p="sol_id";u.prototype._setVisitorId=function(t,e){var i=r.storage.get(p);return i!==e&&r.storage.set(h,i||"blank"),r.storage.set(p,e),r.storage.set(t,e),e},u.prototype._visitorIdProvider=function(t){if(t){if((0,n.isUuid)(t))return this._setVisitorId(c,t);this._error("Invalid visitorId given as "+t)}var e=r.storage.get(p),i=void 0;return(0,n.isUuid)(e)?i=l:(0,n.isUuid)(this.context.visitorId)?(e=this.context.visitorId,i=f):(e=(0,n.uuidV4)(),i=d),this._setVisitorId(i,e)},u.prototype._init=function(t,e){this.context.partnerId=t,this._config(e)},u.prototype._config=function(t){if(t&&((0,n.isDefined)(t.debug)&&(this.context.debug=t.debug),(0,n.isDefined)(t.loginId)&&(this.context.loginId=t.loginId),(0,n.isDefined)(t.apiHost)&&(this.context.apiHost=t.apiHost),(0,n.isDefined)(t.apiPath)&&(this.context.apiPath=t.apiPath),(0,n.isDefined)(t.visitorId))){var e=this._visitorIdProvider(t.visitorId);this.context.visitorId=e===t.visitorId?e:this.context.visitorId}},u.prototype._search=function(t,e){t.type="SEARCH",this._bufferEvent(t,e)},u.prototype._activity=function(t,e,i){(0,n.timeStamp)("Sol _activity "+t),e.type="ACTIVITY",e.activityType=t,this._bufferEvent(e,i)},u.prototype._display=function(t,e){t.type="DISPLAY",this._bufferEvent(t,e)},u.prototype._recommendationsDisplayed=function(t,e){t.type="RECOMMENDATIONS_DISPLAYED",this._bufferEvent(t,e)},u.prototype._watchImpression=function(t,e,i){(0,n.timeStamp)("Sol _watchImpression");var r=this.impressionListeners.get(t);if(r&&JSON.stringify(e)===JSON.stringify(r.data))this._warn("Impression tracker was registered multiple times with same parameters. Ignoring.");else{r&&(this._warn("Impression tracker was registered multiple times with differing parameters. Previous tracker unregistered."),r.off());var s=(0,o.callbackWhenTrueFor)(t,this.context.impressionDuration,function(t){return(0,o.percentVisible)(t)>this.context.impressionVisible}.bind(this),this._activity.bind(this,"IMPRESSION",e,i));this.impressionListeners.set(t,{off:s,data:(0,n.shallowClone)(e)})}},u.prototype._watchImpressionOff=function(t){(0,n.timeStamp)("Sol _watchImpressionOff");var e=this.impressionListeners.get(t);e?(this.impressionListeners.delete(t),e.off()):this._error("Unable to stop impression tracking. No impression tracker found for elementId:"+t)},u.prototype._attachToGlobal=function(){(0,n.timeStamp)("Sol _attachToGlobal");for(var t=window.sol.q||[],e=0;e<t.length;e++)this._track.apply(this,t[e]);window.sol=this._track.bind(this),window.sol.loaded=!0,window.sol.version=a.version},u.prototype._cloneAndAddMetadata=function(t){var e=(0,n.shallowClone)(t);e.policy||(e.policy="sol"),e.eventTime=(0,n.newZDate)(),e.visitorId=this._visitorIdProvider(),this.context.loginId&&(e.loginId=this.context.loginId),e.url=window.location.href,e.referrerUrl=this.context.referrerUrl,e.userAgent=this.context.userAgent;var i=e.tags=(0,n.isObject)(t.tags)?(0,n.shallowClone)(t.tags):{},o=this.context._lastRequestMetrics;return i["solJs:tp"]=this.context.transport.proto,i["solJs:sid"]=o._sessionId,i["solJs:seq"]=""+o._seqNum,o._cfRay&&o._cfRay.length>0&&(i["solJs:cfRay"]=""+o._cfRay),r.storage.get(f)&&(i["solJs:sol_id_from_context"]=r.storage.get(f)),r.storage.get(l)&&(i["solJs:sol_id_pre_stored"]=r.storage.get(l)),r.storage.get(c)&&(i["solJs:sol_id_initialized"]=r.storage.get(c)),r.storage.get(d)&&(i["solJs:sol_id_generated"]=r.storage.get(d)),r.storage.get(h)&&(i["solJs:sol_id_old_value"]=r.storage.get(h)),e},u.prototype._bufferEvent=function(t,e){this._buffer.push({data:this._cloneAndAddMetadata(t),oncomplete:e}),this._shouldFlush()?(this._bufferFlushTimer||(clearTimeout(this._bufferFlushTimer),this._bufferFlushTimer=null),this._flushBuffer()):this._bufferFlushTimer||(this._bufferFlushTimer=setTimeout(function(){this._bufferFlushTimer=null,this._flushBuffer()}.bind(this),this.context.batchLingerMs))},u.prototype._shouldFlush=function(){return this._unloading||!0!==this.context.batch},u.prototype._getApiServer=function(){return this.context.apiHost+this.context.apiPath},u.prototype._flushBuffer=function(){if(this._buffer.length<1)this._error("_flushBuffer called when buffer is empty");else{var t=this._buffer;this._buffer=[];var e={"X-Partner-ID":this.context.partnerId,"X-Request-Time":(0,n.newZDate)(),"X-Client-Version":this.context.version};this.context.debug&&(e["X-Development-Response"]=!0);var i=this.context._lastRequestMetrics;if(i._seqNum++,null!==i._requestDuration&&(e["X-Last-Request-Duration"]=i._requestDuration),i._failures>0){var o=this._failedBuffer;o.length>0&&(this._failedBuffer=[],t=o.concat(t),e["X-Retried-Events"]=o.length),e["X-Last-Request-Failures"]=i._failures,e["X-Last-Request-Status"]=i._status}for(var r=(new Date).getTime(),s=function(e,n,o){try{var s=(new Date).getTime()-r;i._requestDuration=s,i._cfRay=n.get("CF-Ray");var a=e/100|0;2===a?(delete i._failures,delete i._status):(3!==a&&4!==a&&(this._failedBuffer=this._failedBuffer.concat(t)),i._failures=1+(0|i._failures),i._status=e),204!==e&&this._error(e+":"+o);for(var u=0;u<t.length;u++)t[u].oncomplete&&t[u].oncomplete(e,o)}catch(t){this._error(t)}}.bind(this),a=function(t){this._error(t)}.bind(this),u=[],c=0;c<t.length;c++)u.push(t[c].data);this.context.transport.send(this._getApiServer(),e,u,!0===this._unloading,s,a)}},u.prototype._log=function(){if(this.context.debug){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.log.apply(void 0,["info"].concat(e))}},u.prototype._warn=function(){if(this.context.debug){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.log.apply(void 0,["warn"].concat(e))}},u.prototype._error=function(){if(this.context.debug){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.log.apply(void 0,["error"].concat(e))}},i.Sol=u},{"./cross-storage":1,"./storage.js":4,"./tracking.js":5,"./transport.js":6,"./utils.js":7,"./version.js":8}],3:[function(t,e,i){"use strict";new(t("./index.js").Sol)},{"./index.js":2}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}var e=function(t){return!t||"localhost"!==t&&t.substr(0,t.lastIndexOf(".")).length<=3};function i(e,i,n){var o=new Date;return o.setTime(o.getTime()+31536e6),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(i)+"; domain="+n+"; expires="+o.toUTCString()+"; path=/; SameSite=Strict; Secure",t(e)===i}return{set:function(t,n){for(var o=document.location.host.split(":")[0].split("."),r=o.length-1;r>=0;r--){var s=o.slice(r).join(".");if(!e(s)){if(i(t,n,"."+s))return;if(i(t,n,s))return}}},get:function(e){return t(e)}}}();i.storage=n},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.percentVisible=function(t){var e=function(t){var e=t.getBoundingClientRect();e.clipLeft=e.left,e.clipTop=e.top,e.clipRight=e.right,e.clipBottom=e.bottom,e.clipWidth=e.width,e.clipHeight=e.height,e.visible=!0,e.contained=!0;var i=t.ownerDocument&&t.ownerDocument.defaultView;if(!i||!t.offsetWidth||!t.offsetHeight)return e.clipLeft=0,e.clipTop=0,e.clipRight=0,e.clipBottom=0,e.clipWidth=0,e.clipHeight=0,e.visible=!1,e.contained=!1,e;var n=[{left:0,top:0,right:i.innerWidth,bottom:i.innerHeight}],o=t;for(;o=r(o);)n.push(o.getBoundingClientRect());for(var s=0;s<n.length;s+=1){var a=n[s];e.clipLeft=Math.max(e.clipLeft,a.left),e.clipTop=Math.max(e.clipTop,a.top),e.clipRight=Math.min(e.clipRight,a.right),e.clipBottom=Math.min(e.clipBottom,a.bottom)}return e.clipLeft=Math.min(e.clipLeft,e.clipRight),e.clipTop=Math.min(e.clipTop,e.clipBottom),e.clipRight=Math.max(e.clipLeft,e.clipRight),e.clipBottom=Math.max(e.clipTop,e.clipBottom),e.clipWidth=e.clipRight-e.clipLeft,e.clipHeight=e.clipBottom-e.clipTop,e.visible=e.clipWidth>0&&e.clipHeight>0,e.contained=e.clipWidth===e.width&&e.clipHeight===e.height,e}(t);return e.visible?(e.clipBottom-e.clipTop)/e.height:0},i.element=o,i.callbackWhenTrueFor=function(t,e,i,s){var a=void 0,u=o(t);function c(){u&&i(u)&&(p(),s())}function l(){a&&(a=clearTimeout(a))}function d(){u&&i(u)?a||(a=setTimeout(c,e)):l()}var f=(0,n.debounce)(d,50),h=[];"complete"!==document.readyState&&h.push((0,n.addPassiveListener)(document,"readystatechange",f));function p(){l(),h.forEach((function(t){return t()}))}return h.push((0,n.addPassiveListener)(window,"resize",f)),h.push((0,n.addPassiveListener)(window,"scroll",f)),function(t,e){for(var i=[],n=t;n=r(n,e);)i.push(n);return i}(u).forEach((function(t){h.push((0,n.addPassiveListener)(t,"scroll",f))})),d(),p};var n=t("./utils.js");function o(t){if(t instanceof Element)return t;var e=document.getElementById(t);if(null!==e)return e;var i=document.querySelectorAll(t);return i.length>1?null:i[0]}function r(t,e){for(var i=getComputedStyle(t),n="absolute"===i.position,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=t;r=r.parentElement;)if(i=getComputedStyle(r),(!n||"static"!==i.position)&&o.test(i.overflow+i.overflowY+i.overflowX))return r;return null}},{"./utils.js":7}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Transport=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=t("./utils.js");function r(){return"object"===("undefined"==typeof window?"undefined":n(window))&&(0,o.isFunction)(window.fetch)}function s(){var t,e;r()?(this.proto="fetch+",this._sendWhileInteractive=this._sendFetch):(this.proto="xhr+",this._sendWhileInteractive=this._sendXHRAsync),"object"===("undefined"==typeof navigator?"undefined":n(navigator))&&(0,o.isFunction)(navigator.sendBeacon)?(this.proto+="beacon",this._sendWhileUnloading=this._sendBeacon):(t="object"===("undefined"==typeof navigator?"undefined":n(navigator))&&navigator.userAgent||"",e="object"===("undefined"==typeof navigator?"undefined":n(navigator))&&navigator.vendor||"",r()&&((0,o.chromeVersion)(t,e)>=66||(0,o.edgeVersion)(t,e)>=16)?(this.proto+="keepalive",this._sendWhileUnloading=this._sendFetch):(this.proto+="sxhr",this._sendWhileUnloading=this._sendXHRSync))}s.prototype.send=function(t,e,i,n,r,s){var a=t+"?"+(0,o.encodeAsQueryParameters)(e),u=JSON.stringify(i);n?this._sendWhileUnloading(a,u,r,s):this._sendWhileInteractive(a,u,r,s)},s.prototype._sendBeacon=function(t,e){navigator.sendBeacon(t,e)},s.prototype._sendFetch=function(t,e,i,n){fetch(t,{method:"POST",body:e,headers:{"Content-Type":"application/json"}}).then((function(t){return Promise.all([t.status,t.headers,t.text()])})).then((function(t){i(t[0],t[1],t[2])})).catch((function(t){n(t)}))},s.prototype._sendXHRSync=function(t,e,i,n){this._sendXHR(t,e,!0,i,n)},s.prototype._sendXHRAsync=function(t,e,i,n){this._sendXHR(t,e,!1,i,n)},s.prototype._sendXHR=function(t,e,i,n,o){var r=new XMLHttpRequest;r.open("POST",t,!i),r.withCredentials=!1,r.setRequestHeader("Content-Type","application/json"),r.addEventListener("load",(function(){n(r.status,{get:function(t){return r.getResponseHeader(t)}},r.responseText)})),r.addEventListener("error",(function(){o()})),r.send(e)},i.Transport=s},{"./utils.js":7}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function o(){return"undefined"!=typeof DEBUG&&!0===JSON.parse(DEBUG)}function r(t){return Object.prototype.toString.call(t)}function s(t){return void 0===t}i.isDebugBuild=o,i.isUndefined=s,i.isDefined=function(t){return!s(t)},i.isString=function(t){return"[object String]"===r(t)},i.isFunction=function(t){return"function"==typeof t},i.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},i.isObject=a,i.isBlank=function(t){return s(t)||null===t||""===t},i.newZDate=function(){return(new Date).toISOString()},i.shallowClone=function(t){if(a(t)){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}return t},i.encodeAsQueryParameters=function(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},i.log=function(t){if(console&&console.timeStamp){var e=Function.prototype.bind.call(console[t]||console.log,console);e.apply(console,[].slice.call(arguments,1))}},i.timeStamp=function(){console&&console.timeStamp&&o()&&console.timeStamp.apply(console,arguments)},i.addPassiveListener=function(t,e,i){return t.addEventListener(e,i,d),function(){t.removeEventListener(e,i,d)}},i.debounce=function(t,e){var i=null;function n(e,n){i=null,t.apply(e,n)}return function(){i||(i=setTimeout(n,e,this,arguments))}},i.isUuid=function(t){return/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/.test(t)},i.uuidV4=function(){var t=function(t){if("undefined"!=typeof crypto&&crypto.getRandomValues){var e=new Uint8Array(t);return crypto.getRandomValues(e),e}for(var i=[],n=0;n<t;n++)i.push(Math.floor(256*Math.random()));return i}(16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,function(t){return f[t[0]]+f[t[1]]+f[t[2]]+f[t[3]]+"-"+f[t[4]]+f[t[5]]+"-"+f[t[6]]+f[t[7]]+"-"+f[t[8]]+f[t[9]]+"-"+f[t[10]]+f[t[11]]+f[t[12]]+f[t[13]]+f[t[14]]+f[t[15]]}(t)},i.operaVersion=p,i.chromeVersion=function(t,e){var i=/google inc/i.test(e)?t.match(/(?:chrome|crios)\/(\d+)/i):null;return null!==i&&!p(t)&&Number(i[1])},i.edgeVersion=function(t){var e=t.match(/edge\/(\d+)/i);return null!==e&&Number(e[1])},i.firefoxVersion=function(t){var e=t.match(/(?:firefox|fxios)\/(\d+)/i);return null!==e&&Number(e[1])},i.safariVersion=function(t){var e=t.match(/version\/(\d+).+?safari/i);return null!==e&&Number(e[1])},i.ieVersion=function(t){var e=t.match(/(?:msie |trident.+?; rv:)(\d+)/i);return null!==e&&Number(e[1])};i.stringifyJson=JSON.stringify;function a(t){return t===Object(t)&&!u(t)}var u=i.isArray=Array.isArray||function(t){return"[object Array]"===r(t)};var c=!1;try{var l=Object.defineProperty({},"passive",{get:function(){return c=!0}});window.addEventListener("testPassive",null,l),window.removeEventListener("testPassive",null,l)}catch(t){}var d=!!c&&{passive:!0};for(var f=[],h=0;h<256;++h)f[h]=(h+256).toString(16).substr(1);function p(t){var e=t.match(/(?:^opera.+?version|opr)\/(\d+)/i);return null!==e&&Number(e[1])}i.TinyMap=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._keys=[],this._values=[]}return n(t,[{key:"get",value:function(t){return this._values[this._keys.indexOf(t)]}},{key:"set",value:function(t,e){var i=this._keys.indexOf(t);-1!==i?this._values[i]=e:(this._keys.push(t),this._values.push(e))}},{key:"delete",value:function(t){var e=this._keys.indexOf(t);-1!==e&&(this._keys.splice(e,1),this._values.splice(e,1))}},{key:"size",value:function(){return this._keys.length}}]),t}()},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.version="cdn-454"},{}]},{},[3]);
